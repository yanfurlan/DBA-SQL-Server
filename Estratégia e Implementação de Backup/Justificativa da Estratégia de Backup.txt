Justificativa da Estratégia de Backup

A estratégia de backup adotada para o banco de dados WWI_Avaliacao foi projetada para atender aos requisitos de RPO (Recovery Point Objective) e RTO (Recovery Time Objective), assegurando a integridade dos dados e a rápida recuperação em caso de falhas.

Objetivos

RPO (Recovery Point Objective): 15 minutos
Garantir que, em caso de falha, a perda máxima de dados seja de no máximo 15 minutos.

RTO (Recovery Time Objective): até 1 hora
Restaurar o ambiente e colocá-lo novamente em operação dentro de até uma hora após a falha.

Frequência dos Backups

Backup FULL – Diário às 01:00 da manhã
Realizado fora do horário comercial para minimizar impacto na performance do sistema. Esse backup serve como base para todos os demais (diferenciais e logs). A execução diária reduz o número de arquivos necessários durante uma restauração.

Backup DIFFERENTIAL – A cada 4 horas
Armazena apenas as alterações desde o último FULL, o que reduz o tempo de execução e o volume de dados. Sua frequência equilibrada permite restaurar o banco com apenas dois arquivos (FULL + diferencial), agilizando o processo e reduzindo o RTO.

Backup de TRANSACTION LOG – A cada 15 minutos
Permite a restauração ponto-a-ponto, com granularidade suficiente para atender a um RPO de 15 minutos. Esse tipo de backup garante que quase nenhuma transação será perdida, mesmo entre diferenciais.

Justificativa Técnica


A combinação dos três tipos de backup permite equilibrar:

Desempenho do sistema (executando backups pesados fora do horário de pico)

Velocidade de restauração (uso de diferenciais)

Baixa perda de dados (frequência de logs)

Essa abordagem também evita a dependência de uma longa cadeia de backups de log, o que tornaria a restauração mais complexa e arriscada. Além disso, a estratégia é compatível com ambientes que exigem alta disponibilidade e recuperação eficiente.

Observações

O SQL Server Agent deve estar habilitado para a execução automática dos jobs agendados.
Em ambientes onde o Agent não está disponível (ex: SQL Server Express ou instâncias Linux), recomenda-se utilizar um agendador externo como o cron para disparar os scripts de backup.

Os arquivos de backup são armazenados em:
/var/opt/mssql/data/
Esse diretório deve possuir espaço e segurança adequados para armazenar os backups, e recomenda-se uma rotina de cópia dos arquivos para local remoto ou armazenamento em nuvem.